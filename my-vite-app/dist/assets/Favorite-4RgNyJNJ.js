import{_ as L,r as i,c as T,a as S,o as z,w as F,b as B,d as l,e as g,f as s,H as V,S as E,n as N,g as y,h as P,v as $,i as O,j as m,t as w,k as x,l as R,m as U,F as j,p as A,u as D,q as H,s as a,P as K}from"./index-CaYvFz_D.js";const M={class:"App"},q={class:"main-wrapper"},W={class:"favorite-container"},G={key:0,class:"tag-filter"},J={key:1,class:"current-filter"},Q={class:"filter-tag"},X={key:2,class:"login-prompt"},Y={key:3,class:"loading"},Z={key:4,class:"error"},ee={key:5,class:"empty-state"},te={class:"action-buttons"},se={__name:"Favorite",setup(le){D(),H();const n=i(!1),h=i(!1),u=i(null),f=i([]),k=i(""),o=i(""),_=T(()=>S.isLoggedIn.value),d=i(1),v=()=>{const t=window.innerWidth;t<500?d.value=1:t<768?d.value=n.value?1:2:t<1024?d.value=n.value?2:3:d.value=n.value?3:4},I=()=>{n.value=!n.value,v()},b=()=>{const t=k.value.trim();t&&(o.value=t,c())},C=()=>{o.value="",k.value="",c()},c=async()=>{if(_.value){h.value=!0,u.value=null;try{const t=localStorage.getItem("token");if(!t){u.value="Ë™çË®ºÊÉÖÂ†±„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì";return}let e="http://localhost:3000/bookmarked-posts";o.value&&(e+=`?tag=${encodeURIComponent(o.value)}`);const p=await fetch(e,{headers:{Authorization:`Bearer ${t}`}});if(!p.ok)throw new Error("„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØÊäïÁ®ø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü");const r=await p.json();f.value=r,console.log("„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØÊäïÁ®øÂèñÂæóÊàêÂäü:",r.length)}catch(t){console.error("„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØÊäïÁ®øÂèñÂæó„Ç®„É©„Éº:",t),u.value=t.message||"„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü"}finally{h.value=!1}}};return z(()=>{window.addEventListener("resize",v),v(),_.value&&c(),F(()=>S.isLoggedIn.value,t=>{t?c():f.value=[]})}),B(()=>{window.removeEventListener("resize",v)}),F(()=>n.value,()=>{v()}),(t,e)=>{const p=R("router-link");return a(),l("div",M,[g(V,{toggleSidebar:I}),s("div",q,[g(E,{isOpen:n.value},null,8,["isOpen"]),s("div",{class:N(["content",{"with-sidebar":n.value}])},[s("div",W,[e[7]||(e[7]=s("h1",null,"„ÅäÊ∞ó„Å´ÂÖ•„Çä üìå",-1)),_.value?(a(),l("div",G,[P(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>k.value=r),placeholder:"„Çø„Ç∞„Åß„Éï„Ç£„É´„Çø",class:"tag-input",onKeydown:O(b,["enter"])},null,544),[[$,k.value]]),s("button",{onClick:b,class:"filter-btn"},"„Éï„Ç£„É´„Çø"),o.value?(a(),l("button",{key:0,onClick:C,class:"clear-btn"},"„ÇØ„É™„Ç¢")):y("",!0)])):y("",!0),o.value?(a(),l("div",J,[s("p",null,[e[1]||(e[1]=m("„Éï„Ç£„É´„Çø„Éº: ")),s("span",Q,"#"+w(o.value),1)])])):y("",!0),_.value?h.value?(a(),l("div",Y,e[5]||(e[5]=[s("div",{class:"spinner"},null,-1),s("p",null,"Ë™≠„ÅøËæº„Åø‰∏≠...",-1)]))):u.value?(a(),l("div",Z,[s("p",null,w(u.value),1),s("button",{onClick:c},"ÂÜçË™≠„ÅøËæº„Åø")])):f.value.length===0?(a(),l("div",ee,[s("p",null,w(o.value?`„Äå${o.value}„Äç„ÅÆ„Çø„Ç∞„Åå„Å§„ÅÑ„Åü„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØÊäïÁ®ø„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì`:"„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØ„Åó„ÅüÊäïÁ®ø„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì"),1),s("div",te,[g(p,{to:"/",class:"browse-btn"},{default:x(()=>e[6]||(e[6]=[m("ÊäïÁ®ø„ÇíË¶ã„Çã")])),_:1}),o.value?(a(),l("button",{key:0,onClick:C,class:"clear-filter-btn"},"„Éï„Ç£„É´„Çø„Éº„Çí„ÇØ„É™„Ç¢")):y("",!0)])])):(a(),l("ul",{key:6,style:U({display:"grid",gap:"1rem",gridTemplateColumns:`repeat(${d.value}, 1fr)`})},[(a(!0),l(j,null,A(f.value,r=>(a(),l("li",{key:r.id},[g(K,{photo:r},null,8,["photo"])]))),128))],4)):(a(),l("div",X,[s("p",null,[e[3]||(e[3]=m("„ÅäÊ∞ó„Å´ÂÖ•„ÇäÊäïÁ®ø„ÇíË°®Á§∫„Åô„Çã„Å´„ÅØ")),g(p,{to:"/login"},{default:x(()=>e[2]||(e[2]=[m("„É≠„Ç∞„Ç§„É≥")])),_:1}),e[4]||(e[4]=m("„Åó„Å¶„Åè„Å†„Åï„ÅÑ"))])]))])],2)])])}}},oe=L(se,[["__scopeId","data-v-7d54fb22"]]);export{oe as default};
